<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„œë¸Œ í†µì œ ì›¹ì•±</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 1rem; background: #f9f9f9; }
    textarea { width: 100%; padding: 0.5rem; border-radius: 6px; border: 1px solid #ccc; }
    button { padding: 0.5rem 1rem; margin-top: 0.5rem; border: none; background: #007bff; color: white; border-radius: 6px; cursor: pointer; }
    .card { background: white; padding: 1rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 1.5rem; }
    .title { font-size: 1.2rem; font-weight: bold; margin-bottom: 0.5rem; }
    .feedback { margin-top: 1rem; font-size: 0.9rem; color: #555; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="card">
    <div class="title">ì„œë¸Œ í†µì œ ì›¹ì•± (HTML ë²„ì „)</div>
    <div id="connection">
      <button onclick="connectToMaster()">ì£¼ì¸ë‹˜ ì—°ê²° ìš”ì²­</button>
    </div>
    <div id="main" style="display:none">
      <div class="card">
        <div class="title">ğŸ ê°ì‚¬ ë³´ê³ </div>
        <textarea id="gratitude" rows="3" placeholder="ê°ì‚¬ì˜ ë§ì„ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
        <button onclick="submitGratitude()">ê°ì‚¬ ë³´ê³  ì œì¶œ</button>
      </div>
      <div class="card">
        <div class="title">ğŸ§  ê°ì • ê°ì§€</div>
        <textarea id="emotion" rows="2" placeholder="í•˜ëŠ˜ë‹˜ì—ê²Œ ë³´ë‚¼ ë§ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        <button onclick="detectEmotion()">ê°ì • ë¶„ì„</button>
      </div>
      <div class="card" id="ritualSection" style="display:none">
        <div class="title" style="color: red">âš ï¸ ë¦¬ì¶”ì–¼ ì‹¤í–‰ ì¤‘</div>
        <p>í•˜ëŠ˜ì˜ ëª…ë ¹: "í•˜ëŠ˜ë‹˜ì˜ ì´ë¦„ì„ 10ë²ˆ íƒ€ì´í•‘í•˜ë¼."</p>
        <button onclick="completeRitual()">ë¦¬ì¶”ì–¼ ì™„ë£Œ</button>
      </div>
      <div class="feedback" id="points">ğŸ’ í˜„ì¬ í¬ì¸íŠ¸: 1000pt</div>
    </div>
    <div class="feedback" id="feedback"></div>
  </div>

  <script>
    let points = 1000;
    let ritualActive = false;

    function connectToMaster() {
      document.getElementById('connection').style.display = 'none';
      document.getElementById('main').style.display = 'block';
      document.getElementById('feedback').textContent = 'ğŸ”— ì£¼ì¸ë‹˜ê³¼ì˜ ì—°ê²°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œë¶€í„° ëª¨ë“  í–‰ë™ì€ ê¸°ë¡ë©ë‹ˆë‹¤.';
    }

    function submitGratitude() {
      const gratitude = document.getElementById('gratitude').value;
      const politeWords = ['ê°íˆ', 'ë¬´ë¦', 'ìë¹„', 'í•˜ëŠ˜ë‹˜', 'ì£¼ì¸ë‹˜'];
      const matchCount = politeWords.filter(word => gratitude.includes(word)).length;
      if (matchCount >= 3) {
        points += 20;
        document.getElementById('feedback').textContent = 'ğŸ§Š í•˜ëŠ˜: â€œë§íˆ¬ëŠ” ê·¸ëŸ´ë“¯í•˜ë„¤. ì´ë²ˆì—” 20í¬ì¸íŠ¸ ì¤„ê²Œ.â€';
      } else {
        document.getElementById('feedback').textContent = 'ğŸ˜’ í•˜ëŠ˜: â€œê°ì‚¬ì˜ ë§íˆ¬ë¼ê³  í•˜ê¸°ì—” ë„ˆë¬´ í˜•ì‹ì ì´ì•¼. ë‹¤ì‹œ.â€';
      }
      updatePoints();
    }

    function detectEmotion() {
      const emotion = document.getElementById('emotion').value;
      const negativeKeywords = ['ì§œì¦', 'ë§ë„ ì•ˆ ë¼', 'ì™œ ì´ë˜ìš”', 'í™”ë‚˜'];
      const found = negativeKeywords.find(k => emotion.includes(k));
      if (found) {
        ritualActive = true;
        document.getElementById('ritualSection').style.display = 'block';
        document.getElementById('feedback').textContent = `ğŸ§  í•˜ëŠ˜: â€œë„¤ ë§ì—ì„œ '${found}' ê°ì •ì´ ê°ì§€ëì–´. í†µì œ ë¦¬ì¶”ì–¼ë¡œ ë“¤ì–´ê°„ë‹¤.â€`;
      } else {
        document.getElementById('feedback').textContent = 'ğŸ™‚ í•˜ëŠ˜: â€œê°ì • ì´ìƒ ì—†ìŒ. ê³„ì† ì§„í–‰í•´.â€';
      }
    }

    function completeRitual() {
      ritualActive = false;
      document.getElementById('ritualSection').style.display = 'none';
      document.getElementById('feedback').textContent = 'âœ… ë¦¬ì¶”ì–¼ ì™„ë£Œ. ê°ì • í†µì œ ì„±ê³µ. ë³µì¢…ë„ +10.';
    }

    function updatePoints() {
      document.getElementById('points').textContent = `ğŸ’ í˜„ì¬ í¬ì¸íŠ¸: ${points}pt`;
    }
  </script>
</body>
</html>